From 00f9204b9cdd8d44c4b252c3b945afd0ea5fe1c7 Mon Sep 17 00:00:00 2001
From: Hoang Phan <hoangphan@amorepacific.com>
Date: Tue, 11 Oct 2022 06:25:46 -0400
Subject: [PATCH] ITO0035-14 [G-DEV] report.CRITICAL: Invalid template file

---
 vendor/magento/framework/View/Element/Template.php | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/vendor/magento/framework/View/Element/Template.php b/vendor/magento/framework/View/Element/Template.php
index e9f164c..aeca2b0 100644
--- a/vendor/magento/framework/View/Element/Template.php
+++ b/vendor/magento/framework/View/Element/Template.php
@@ -276,6 +276,16 @@ class Template extends AbstractBlock
             $templatePath = $fileName ?: $this->getTemplate();
             $errorMessage = "Invalid template file: '{$templatePath}' in module: '{$this->getModuleName()}'"
                 . " block's name: '{$this->getNameInLayout()}'";
+            if ($this->getModuleName() == 'Magento_Cms') {
+                $writer = new \Zend_Log_Writer_Stream(BP . '/var/log/log-for-ticket-ITO0035-14.log');
+                $logger = new \Zend_Log();
+                $logger->addWriter($writer);
+                $logger->info($errorMessage);
+                $logger->info('filename: '. $fileName);
+                $logger->info('full action name: '. $this->getRequest()->getFullActionName());
+                $logger->info('request uri: ' . $_SERVER['REQUEST_URI']);
+                $logger->info('block data: ' . json_encode($this->getData()));
+            }
             if ($this->_appState->getMode() === \Magento\Framework\App\State::MODE_DEVELOPER) {
                 throw new \Magento\Framework\Exception\ValidatorException(
                     new \Magento\Framework\Phrase(
--
2.25.1

