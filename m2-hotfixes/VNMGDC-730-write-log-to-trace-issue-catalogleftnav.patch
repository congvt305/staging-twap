From b877e48ac884ccc333ce03bec97edacf9ff03a6f Mon Sep 17 00:00:00 2001
From: Hoang Phan <hoangphan@amorepacific.com>
Date: Thu, 18 Aug 2022 23:40:54 -0400
Subject: [PATCH] Log exception trace

---
 ./vendor/magento/framework/View/Element/ExceptionHandlerBlock.php | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

diff --git ./vendor/magento/framework/View/Element/ExceptionHandlerBlock.php ./vendor/magento/framework/View/Element/ExceptionHandlerBlock.php
index 101eea5..4581f66 100644
--- ./vendor/magento/framework/View/Element/ExceptionHandlerBlock.php
+++ ./vendor/magento/framework/View/Element/ExceptionHandlerBlock.php
@@ -56,8 +56,16 @@ class ExceptionHandlerBlock implements BlockInterface
      */
     public function toHtml()
     {
-        throw new LocalizedException(
+        $e = new LocalizedException(
             new Phrase('The "%1" block threw an exception, and it can\'t be rendered.', [$this->blockName])
         );
+        if ($this->blockName == 'catalog.leftnav') {
+            $writer = new \Zend_Log_Writer_Stream(BP . '/var/log/log-error-VNMGDC-730.log');
+            $logger = new \Zend_Log();
+            $logger->addWriter($writer);
+            $logger->info(' The "catalog.leftnav" block threw an exception, and it can\'t be rendered.');
+            $logger->info($e->getTraceAsString());
+        }
+        throw $e;
     }
 }
--
2.25.1

